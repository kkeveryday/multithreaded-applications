# ОРГАНИЗАЦИЯ МНОГОПОТОЧНЫХ ПРИЛОЖЕНИЙ В ОС WINDOWS
## Задание
### Найти и вывести предложения, содержащее наибольшее число знаков препинания
1)	Разработать три консольные программы для обработки текстовых файлов:
•	А – однопоточная программа с последовательной обработкой файлов
•	В – многопоточная программа с параллельной обработкой файлов
•	С – многопоточная программа с параллельной обработкой файлов и повышенным приоритетом потоков
В каждой программе производить измерение общего времени обработки всех файлов и время, затраченное на обработку каждого файла в отдельности. Программы должны содержать шапку в виде комментария с указанием фамилии студента и номера группы, номера варианта и назначения программы. Имя исполнимого файла программы должно включать фамилию студента
2)	Реализацию алгоритма обработки текстового файла представить в виде отдельной функции. Придумать алгоритм, не использующий предварительную загрузку в память обрабатываемого файла целиком! Производите считывание данных файла посимвольно или построчно.
3)	Программы должны обрабатывать не более 10 текстовых файлов одновременно. Файлы подготавливаются заранее и должны содержать текст в формате ASCII, соответствующий требованиям задания. Размер файлов должен быть подобран таким образом, чтобы длительность обработки каждого из них составляла не менее 0,2 с. 
Имена файлов задаются через параметры командной строки. Предусмотреть контроль вводимых имен – не должны приниматься в обработку одноименные и несуществующие файлы. Если вариант задания требует ввода каких-либо дополнительных данных, использовать для этого также командную строку!
4)	Для многопоточных режимов B и C провести анализ кода функции потока и принять обоснованное решение о необходимости (или отсутствии необходимости) применения средств синхронизации (взаимоисключения) потоков.
5)	Вывод результатов обработки (измененный текст и/или подсчитанные показатели) производить в отдельные вновь создаваемые файлы. Например, если исходный файл называется data1.txt, то вывод результатов обработки этого файла нужно производить в файл data1_out.txt. Допускается одновременно выводить информацию и на экран (но только из главного потока!)
6)	Необходимо фиксировать время начала и завершения выполнения функции обработки текстового файла. Полученные значения необходимо сохранять в массиве и выводить на экран (из главного потока после вывода общего времени работы).
7)	В многопоточной программе (алгоритмы B и C) для перевода главного потока в режим ожидания завершения дочерних потоков воспользоваться функцией WaitForMultipleObjects. Для увеличения приоритетов создаваемых потоков (алгоритм C) следует воспользоваться функцией SetThreadPriority, выбрав относительный приоритет таким образом, чтобы обеспечить наивысшее допустимое значение. Обратите внимание, что потоки, для которых планируется повысить приоритет должны создаваться с параметром CREATE_SUSPENDED. Для контроля приоритетов потоков можно воспользоваться утилитами Process Explorer
8)	Провести эксперимент по оценке времени выполнения обработки текстовых файлов для каждого варианта программы (A, B, C) при двух различных способах размещения файлов: режим H – на жестком диске; режим F – на flash-накопителе. В каждом режиме проведения эксперимента (всего шесть режимов, условно обозначаемых AH, BH, CH, AF, BF, CF) для каждого значения N=1, 2, …, 10 (количество обрабатываемых файлов), произвести не менее 5 опытов (запусков программ).
9)	Построить графики зависимости среднего времени выполнения программ A, B и C отдельно для режимов H и F. Для повышения эффективности работы c табличными данными и автоматического построения графиков рекомендуется использовать MS Excel.
10)	Для числа обрабатываемых файлов N=5 по измерениям, полученным в п. 6, построить диаграммы трасс функций обработки файлов (потоков) для произвольно выбранного опыта (запуска) в режимах AH и BH, а также AF и BF. На диаграммах показать моменты времени начала и завершения выполнения функции обработки (потока), а также общее время, затраченное на обработку.
11)	Сделать выводы по результатам проведенного эксперимента об эффективности использования каждого из режимов.
## Блок схемы:
### К программе A:
![image](https://user-images.githubusercontent.com/58790323/143464430-39f59f22-eec3-46dc-af83-c53dc7870323.png)
### К программе B и C:
![image](https://user-images.githubusercontent.com/58790323/143464511-b2967624-14e3-4121-8733-747f45ab2b0d.png)
## Скриншоты работы программы:
### В режиме АН:
![image](https://user-images.githubusercontent.com/58790323/143465003-8c713df3-0745-4c93-ae7c-1091d3c73b79.png)
![image](https://user-images.githubusercontent.com/58790323/143465017-546b0ef3-b658-42fe-9582-e56183f9133d.png)
### В режиме АF:
![image](https://user-images.githubusercontent.com/58790323/143465078-04a0ec23-c75b-4629-ad19-c662cf3b7358.png)
![image](https://user-images.githubusercontent.com/58790323/143465095-36a40e17-0f52-45db-8f10-d539420e3265.png)
### В режиме BH:
![image](https://user-images.githubusercontent.com/58790323/143465122-3d3d987f-5a76-49d6-a3da-c58e323e3c6f.png)
![image](https://user-images.githubusercontent.com/58790323/143465134-47592933-0ec8-47b2-aad2-0a38e5da66bb.png)
### В режиме BF:
![image](https://user-images.githubusercontent.com/58790323/143465180-871de1dc-7289-49f9-87be-1c2e59d91ba4.png)
![image](https://user-images.githubusercontent.com/58790323/143465188-2dbbd945-1f56-4486-8ce9-4f02a484436b.png)
### В режиме CН:
![image](https://user-images.githubusercontent.com/58790323/143465236-c2be98e4-8ed9-4f1d-befa-0733e60ab87a.png)
![image](https://user-images.githubusercontent.com/58790323/143465253-9703fecc-faf2-4d32-b498-7e55a5fdb99a.png)
### В режиме CF:
![image](https://user-images.githubusercontent.com/58790323/143465287-d4bc0401-765c-45c5-8a84-7eda0e7b2a2b.png)
![image](https://user-images.githubusercontent.com/58790323/143465294-1559a848-740e-4581-921f-0e08febe5667.png)
## Результаты экспериментов:
### Таблица 1 (файлы на жёстком диске)
![image](https://user-images.githubusercontent.com/58790323/143465573-85c35172-f409-4e88-840d-967d61514d72.png)
### Таблица 2 (файлы на жестком диске)
![image](https://user-images.githubusercontent.com/58790323/143465695-6d01e4f7-e0a4-4719-a560-5eb94266fd24.png)
### Таблица 3 (файлы на flash-накопителе)
![image](https://user-images.githubusercontent.com/58790323/143465779-f8eb0278-21b0-4c77-ba88-521073e70eba.png)
### Таблица 4 (файлы на flash-накопителе)
![image](https://user-images.githubusercontent.com/58790323/143465865-fd6baab9-7344-4fee-bd1c-e39216b4000c.png)
## Графики зависимости среднего выполнения программ A, B, C
### График (файлы хранятся на жёстком диске)
![image](https://user-images.githubusercontent.com/58790323/143465918-7d214f64-32dc-4d15-aa90-a573d76fa565.png)
### График (файлы хранятся на flash-накопителе)
![image](https://user-images.githubusercontent.com/58790323/143465939-6c069f38-dbdd-47de-b859-b16bafddc4cb.png)
## Скриншоты окна утилиты Process Explorer с отображением параметров потоков
### Программы B:
![image](https://user-images.githubusercontent.com/58790323/143466001-ddb3b0a0-4686-4e2f-8aae-1a13797b55b8.png)
### Программы C:
![image](https://user-images.githubusercontent.com/58790323/143466020-59175d97-e68b-4053-9307-8a875560ea64.png)
## Диаграммы трасс потоков:
### Для режима AH
![image](https://user-images.githubusercontent.com/58790323/143466064-5f6c076c-45d9-4338-a6ee-206b00f8851a.png)
### Для режима AF
![image](https://user-images.githubusercontent.com/58790323/143466085-55778715-7492-41f9-a5e8-c8f53fc6f014.png)
### Для режима BH
![image](https://user-images.githubusercontent.com/58790323/143466125-58a28380-8f97-4f91-881b-3922ce69c61c.png)
### Для режима BF
![image](https://user-images.githubusercontent.com/58790323/143466154-b83a6ee2-d42d-4d63-b794-d868c963a02a.png)
## Выводы:
Общее время обработки в многопоточном режиме меньше по сравнению с однопоточным, так как программа не ждёт, пока завершится обработка файла и запускает обработку другого. С помощью этого в среднем общее время обработки файлов в многопоточном режиме уменьшилось в 2 раза по сравнению с однопоточным режимом.

Среднее время обработки файлов в различных режимах, при их размещении на flash-накопителе, немного увеличилось.

Как видно из диаграмм трасс потоков, общее время обработки файлов уменьшилось при вводе многопоточного режима, так как у нас, по сути, файлы обрабатываются одновременно, а не ждут окончания обработки друг друга.

Производительность обработки при повышении приоритета потоков растёт, так как потоки могут проходить проходит вне очереди, по сравнению с некоторыми другими потоками, и сразу обрабатываться.

Количество ядер влияет на получаемые результаты работы программы (кроме однопоточной), чем больше ядер у процессора, тем быстрее выполняется программа.

Если оставить включенным только одно ядро, то однопоточная и многопоточная программы будут работать одинаковое количество времени, так как не будет режима обработки в параллельном режиме и все функции будут выполняться поочередно.

В данной работе не потребовалось использовать средства синхронизации потоков, потому что они не работают с разделяемыми переменными.




















